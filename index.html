<div class="replace-section">
    <h3>Word Replacement Tool</h3>
    <input type="text" id="findWord" placeholder="Word to replace">
    <input type="text" id="replaceWord" placeholder="Replacement word">
    <button onclick="replaceWords()">Replace Words</button>
</div>

<div class="news-container" id="newsContainer"></div>

<script>
    let newsList = JSON.parse(localStorage.getItem('newsList')) || [];
    
    function addNews() {
        let headline = document.getElementById('headline').value;
        let fullNews = document.getElementById('fullNews').value;
        let newsUrl = document.getElementById('newsUrl').value.trim();

        if (!headline || !fullNews) {
            alert("Headline and Full News are required!");
            return;
        }

        let newsItem = { headline, fullNews, newsUrl };
        newsList.push(newsItem);
        localStorage.setItem('newsList', JSON.stringify(newsList));
        displayNews();
    }

    function displayNews() {
        let container = document.getElementById('newsContainer');
        container.innerHTML = '';
        newsList.forEach((news, index) => {
            container.innerHTML += `
                <div class="news-item">
                    <h3>${news.headline}</h3>
                    <p>${news.fullNews}</p>
                    ${news.newsUrl ? `<p><a href="${news.newsUrl}" target="_blank">Read more</a></p>` : ''}
                    <button onclick="copyText('${news.fullNews}')">Copy Text</button>
                    <button onclick="sendEmail('${news.headline}', '${news.fullNews}', '${news.newsUrl}')">Send Email</button>
                    <button onclick="deleteNews(${index})">Delete</button>
                </div>
            `;
        });
    }

    function replaceWords() {
        const find = document.getElementById('findWord').value;
        const replace = document.getElementById('replaceWord').value;
        
        if (!find) {
            alert("Please enter a word to find!");
            return;
        }

        const regex = new RegExp(escapeRegExp(find), 'gi');
        
        newsList = newsList.map(news => ({
            ...news,
            headline: news.headline.replace(regex, replace),
            fullNews: news.fullNews.replace(regex, replace)
        }));
        
        localStorage.setItem('newsList', JSON.stringify(newsList));
        displayNews();
    }

    function escapeRegExp(string) {
        return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    }

    function copyText(text) {
        navigator.clipboard.writeText(text).then(() => {
            alert("News copied to clipboard!");
        });
    }

    function deleteNews(index) {
        newsList.splice(index, 1);
        localStorage.setItem('newsList', JSON.stringify(newsList));
        displayNews();
    }

    function sendEmail(headline, fullNews, newsUrl) {
        let emailBody = `Headline: ${headline}%0D%0A%0D%0A${fullNews}`;
        if (newsUrl) emailBody += `%0D%0ARead more: ${newsUrl}`;
        
        let mailtoLink = `mailto:?subject=${encodeURIComponent(headline)}&body=${emailBody}`;
        window.location.href = mailtoLink;
    }

    function sendAllNews() {
        let emailBody = "";
        newsList.forEach(news => {
            emailBody += `Headline: ${news.headline}%0D%0A${news.fullNews}%0D%0A`;
            if (news.newsUrl) emailBody += `Read more: ${news.newsUrl}%0D%0A`;
            emailBody += `%0D%0A----------------------%0D%0A`;
        });
        
        let mailtoLink = `mailto:?subject=All News&body=${emailBody}`;
        window.location.href = mailtoLink;
    }

    displayNews();
                              </script>
